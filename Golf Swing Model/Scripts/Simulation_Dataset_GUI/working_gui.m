function working_gui()
    % Create a working, simplified version of the Golf Swing Data Generator GUI
    
    % Create main figure
    fig = figure('Name', 'Golf Swing Data Generator - Working Version', ...
                 'Position', [50, 50, 1200, 800], ...
                 'MenuBar', 'none', ...
                 'ToolBar', 'none', ...
                 'Resize', 'on', ...
                 'Color', [0.96, 0.96, 0.98], ...
                 'NumberTitle', 'off');
    
    % Initialize handles structure
    handles = struct();
    handles.should_stop = false;
    handles.trial_table_data = [];
    
    % Create title
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Golf Swing Data Generator', ...
              'Position', [20, 750, 400, 30], ...
              'FontSize', 16, ...
              'FontWeight', 'bold', ...
              'BackgroundColor', [0.96, 0.96, 0.98]);
    
    % Create trial settings section
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Trial Settings:', ...
              'Position', [20, 700, 150, 20], ...
              'FontSize', 12, ...
              'FontWeight', 'bold');
    
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Number of Trials:', ...
              'Position', [20, 670, 120, 20]);
    
    handles.num_trials_edit = uicontrol('Parent', fig, ...
                                       'Style', 'edit', ...
                                       'String', '10', ...
                                       'Position', [150, 670, 80, 20]);
    
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Simulation Time (s):', ...
              'Position', [20, 640, 120, 20]);
    
    handles.sim_time_edit = uicontrol('Parent', fig, ...
                                     'Style', 'edit', ...
                                     'String', '2.0', ...
                                     'Position', [150, 640, 80, 20]);
    
    % Create data sources section
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Data Sources:', ...
              'Position', [20, 600, 150, 20], ...
              'FontSize', 12, ...
              'FontWeight', 'bold');
    
    handles.use_model_workspace = uicontrol('Parent', fig, ...
                                           'Style', 'checkbox', ...
                                           'String', 'Model Workspace', ...
                                           'Position', [20, 570, 150, 20], ...
                                           'Value', 1);
    
    handles.use_logsout = uicontrol('Parent', fig, ...
                                   'Style', 'checkbox', ...
                                   'String', 'Logsout', ...
                                   'Position', [20, 540, 150, 20], ...
                                   'Value', 1);
    
    % Create output section
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Output Settings:', ...
              'Position', [20, 500, 150, 20], ...
              'FontSize', 12, ...
              'FontWeight', 'bold');
    
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Output Folder:', ...
              'Position', [20, 470, 120, 20]);
    
    handles.output_folder_edit = uicontrol('Parent', fig, ...
                                          'Style', 'edit', ...
                                          'String', './output', ...
                                          'Position', [150, 470, 200, 20]);
    
    handles.browse_button = uicontrol('Parent', fig, ...
                                     'Style', 'pushbutton', ...
                                     'String', 'Browse', ...
                                     'Position', [360, 470, 80, 20]);
    
    % Create control buttons
    handles.start_button = uicontrol('Parent', fig, ...
                                    'Style', 'pushbutton', ...
                                    'String', 'Start Generation', ...
                                    'Position', [20, 400, 120, 30], ...
                                    'FontSize', 12, ...
                                    'FontWeight', 'bold');
    
    handles.stop_button = uicontrol('Parent', fig, ...
                                   'Style', 'pushbutton', ...
                                   'String', 'Stop', ...
                                   'Position', [150, 400, 80, 30], ...
                                   'FontSize', 12, ...
                                   'Enable', 'off');
    
    % Create status display
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Status:', ...
              'Position', [20, 350, 150, 20], ...
              'FontSize', 12, ...
              'FontWeight', 'bold');
    
    handles.status_text = uicontrol('Parent', fig, ...
                                   'Style', 'text', ...
                                   'String', 'Ready', ...
                                   'Position', [20, 320, 400, 20], ...
                                   'HorizontalAlignment', 'left');
    
    % Create progress bar
    handles.progress_bar = uicontrol('Parent', fig, ...
                                    'Style', 'text', ...
                                    'String', 'Progress: 0%', ...
                                    'Position', [20, 280, 400, 20], ...
                                    'HorizontalAlignment', 'left');
    
    % Create log display
    uicontrol('Parent', fig, ...
              'Style', 'text', ...
              'String', 'Log:', ...
              'Position', [20, 240, 150, 20], ...
              'FontSize', 12, ...
              'FontWeight', 'bold');
    
    handles.log_text = uicontrol('Parent', fig, ...
                                'Style', 'text', ...
                                'String', 'GUI initialized successfully', ...
                                'Position', [20, 50, 500, 180], ...
                                'HorizontalAlignment', 'left', ...
                                'BackgroundColor', [0.95, 0.95, 0.95]);
    
    % Store handles in figure
    guidata(fig, handles);
    
    fprintf('Working GUI created successfully!\n');
end 