# Cursor Development Rules for Golf Model Project

## Project Structure and Organization

### File Organization
- **MATLAB files** (.m, .slx, .mdl, .mat) should be stored in the `matlab/` directory
- **Python files** should be stored in the `python/` directory
- **Documentation** should be stored in the `docs/` directory
- **Scripts and utilities** should be stored in the `scripts/` directory

### **MANDATORY Folder Organization Requirements**
- **Main Directories**: Keep clean with only essential files (max 10 files)
  - Main application files (e.g., `Data_GUI_Enhanced.m`)
  - Project README.md files
  - Configuration files (e.g., `user_preferences.mat`)
  - Essential data files
- **Functions Directories**: `functions/` folder for all extracted modules
  - Group functions by responsibility (simulation, GUI, data processing, etc.)
  - One function per file (filename == function name)
  - Organize related functions in logical subdirectories if needed
- **Documentation Directories**: `docs/` folder for all documentation
  - README files, guides, and analysis documents
  - Refactoring documentation and progress tracking
  - Performance analysis and optimization guides
  - User documentation and tutorials
- **Test Directories**: `tests/` folder for unit tests and validation scripts
  - Unit tests for individual functions
  - Integration tests for modules
  - Performance benchmarks
- **Data Directories**: `data/` folder for input/output data files
  - Input datasets and configuration files
  - Output results and generated data
  - Temporary files and caches

### **Project Structure Template**
```
ProjectName/
├── MainApplication.m           # Main application entry point
├── README.md                  # Project overview and navigation
├── functions/                 # All function modules
│   ├── core/                  # Core functionality modules
│   ├── gui/                   # GUI-related functions
│   ├── data/                  # Data processing functions
│   ├── utils/                 # Utility functions
│   └── tests/                 # Test functions
├── docs/                      # Documentation
│   ├── user_guides/           # User documentation
│   ├── technical/             # Technical documentation
│   ├── refactoring/           # Refactoring progress
│   └── performance/           # Performance analysis
├── tests/                     # Unit and integration tests
├── data/                      # Data files
│   ├── input/                 # Input data
│   ├── output/                # Output results
│   └── temp/                  # Temporary files
├── config/                    # Configuration files
└── archive/                   # Backup and archive files
```

### **Folder Organization Rules**
- **MUST** separate functions from documentation
- **MUST** keep main directory clean and focused
- **SHOULD** group related functions in subdirectories
- **SHOULD** use descriptive folder names
- **AVOID** mixing code, docs, and data in same directory
- **AVOID** having more than 10 files in main directory

### Git Tracking Rules
- **ALWAYS track** all `.slx`, `.mdl`, and `.mat` files in Git
- **NEVER ignore** these critical model files
- Keep backup versions in appropriate archive directories
- Use descriptive commit messages for model changes

### Code Quality Standards

#### MATLAB Code
- Use consistent naming conventions (camelCase for variables, PascalCase for functions)
- Include proper error handling and input validation
- Add comments explaining complex algorithms
- Use meaningful variable names
- Follow MATLAB best practices for performance
- **MUST** extract functions when main file exceeds 500 lines
- **MUST** extract functions when single file contains 10+ functions
- **SHOULD** extract functions for single responsibility principle

#### Python Code
- Follow PEP 8 style guidelines
- Use type hints where appropriate
- Include docstrings for all functions and classes
- Use virtual environments for dependency management
- Write unit tests for critical functions

### **Refactoring & Modularization Guidelines**

#### **When to Extract Functions**
- **MUST** extract functions when main file exceeds 500 lines
- **MUST** extract functions when single file contains 10+ functions
- **SHOULD** extract functions for single responsibility principle
- **SHOULD** extract functions for reusability across projects
- **SHOULD** extract functions for easier testing and debugging

#### **Function Extraction Strategy**
- **Group by Responsibility**: Extract related functions together
- **Maintain Interface**: Preserve function signatures and behavior
- **Update Dependencies**: Ensure all function calls are updated
- **Preserve Parallel Computing**: Maintain `AttachedFiles` and worker compatibility
- **Document Changes**: Update documentation and README files

#### **Module Organization**
- **Core Modules**: Essential functionality (simulation, data processing)
- **GUI Modules**: User interface and interaction functions
- **Utility Modules**: Helper functions and tools
- **Configuration Modules**: Settings and preferences management
- **Test Modules**: Validation and testing functions

### Model Development Guidelines
- Keep models modular and well-documented
- Use consistent parameter naming across models
- Document all assumptions and limitations
- Version control all model iterations
- Test models with known inputs before deployment

### Data Management
- Store large data files in appropriate subdirectories
- Use consistent naming conventions for data files
- Document data sources and processing steps
- Keep raw and processed data separate
- Use appropriate file formats for different data types

### Documentation Requirements
- Maintain up-to-date README files
- Document all major functions and scripts
- Include usage examples where appropriate
- Keep changelog updated
- Document model parameters and assumptions
- **MUST** store all documentation in `docs/` folder
- **MUST** update documentation when reorganizing project structure

### Testing and Validation
- Test all new functionality before committing
- Validate model outputs against known results
- Use appropriate testing frameworks
- Include test data in version control
- Document test procedures and expected results

### Performance Considerations
- Optimize code for large datasets
- Use vectorized operations where possible
- Profile code to identify bottlenecks
- Consider parallel processing for heavy computations
- Document performance characteristics
- **Preserve Parallel Computing**: When refactoring, maintain `AttachedFiles` list and worker function compatibility

### Security and Best Practices
- Never commit sensitive data or credentials
- Use environment variables for configuration
- Follow secure coding practices
- Validate all inputs
- Use appropriate access controls

### Collaboration Guidelines
- Use descriptive branch names (e.g., `feat/new-feature`, `fix/bug-description`)
- Write clear commit messages
- Review code before merging
- Communicate changes to team members
- Keep branches up to date with main

### **Workflow Improvements**

#### **Development Workflow**
1. **Start with Clean Structure**: Set up proper folder organization from the beginning
2. **Extract Early**: Don't wait until files become monolithic
3. **Document as You Go**: Keep documentation updated with code changes
4. **Test Incrementally**: Write tests for each extracted function
5. **Profile Regularly**: Monitor performance during development
6. **Review Structure**: Periodically review and reorganize as needed

#### **Refactoring Workflow**
1. **Analyze Current State**: Identify functions to extract and their dependencies
2. **Plan Extraction**: Group related functions and plan module organization
3. **Extract Incrementally**: Extract one module at a time, test thoroughly
4. **Update Dependencies**: Ensure all function calls and imports are updated
5. **Preserve Functionality**: Maintain all existing features and performance
6. **Update Documentation**: Keep all documentation current
7. **Reorganize Structure**: Move files to appropriate folders

#### **Collaboration Workflow**
1. **Clear Structure**: Use consistent folder organization across team
2. **Documentation**: Keep README files updated with current structure
3. **Code Reviews**: Include folder organization in review process
4. **Version Control**: Use meaningful commit messages for structural changes
5. **Onboarding**: Provide clear navigation guides for new team members

### Maintenance and Updates
- Regularly update dependencies
- Monitor for deprecated functions
- Keep documentation current
- Archive old versions appropriately
- Maintain backward compatibility where possible

## Specific Project Rules

### Golf Swing Model Specific
- All model files must be tracked in Git
- Use consistent coordinate systems across models
- Document all physical parameters and units
- Validate model outputs against experimental data
- Keep model versions synchronized across scripts

### File Naming Conventions
- Use descriptive names for all files
- Include version numbers in model files where appropriate
- Use consistent date formats in filenames
- Group related files in appropriate directories
- Use clear abbreviations for common terms

### Error Handling
- Implement proper error checking for file operations
- Validate input parameters
- Provide meaningful error messages
- Log errors appropriately
- Handle edge cases gracefully

### Performance Optimization
- Use efficient algorithms for large datasets
- Minimize memory usage
- Profile code regularly
- Use appropriate data structures
- Consider parallel processing where beneficial

### Code Review Process
- Review all code changes before merging
- Check for adherence to style guidelines
- Verify functionality and performance
- Ensure proper documentation
- Test with appropriate data sets
- **Include folder organization review** in code review process

### Deployment and Distribution
- Package code appropriately for distribution
- Include all necessary dependencies
- Provide clear installation instructions
- Test deployment process
- Document deployment procedures

### Monitoring and Logging
- Implement appropriate logging levels
- Monitor performance metrics
- Track usage patterns
- Log errors and warnings
- Maintain audit trails

### Backup and Recovery
- Maintain regular backups of critical data
- Version control all important files
- Document recovery procedures
- Test backup and recovery processes
- Store backups in secure locations

### Compliance and Standards
- Follow industry best practices
- Adhere to relevant standards
- Maintain compliance documentation
- Regular compliance reviews
- Update procedures as needed

## Implementation Notes

### Current Status
- Project structure is well-organized
- Git tracking is properly configured
- Documentation is comprehensive
- Testing framework is in place
- Quality checks are automated
- **Folder organization requirements implemented**

### Future Improvements
- Enhance automated testing
- Improve performance monitoring
- Expand documentation coverage
- Optimize build processes
- Enhance collaboration tools
- **Continue enforcing folder organization standards**

### Maintenance Schedule
- Weekly code reviews
- Monthly dependency updates
- Quarterly documentation reviews
- Annual security assessments
- Continuous monitoring and improvement
- **Regular folder structure audits**

## Conclusion

These rules ensure consistent, high-quality development practices across the Golf Model project. All team members should follow these guidelines to maintain code quality, ensure proper version control, and facilitate effective collaboration.

**Key Focus Areas:**
- **Clean Project Structure**: Maintain organized folder hierarchy
- **Modular Code**: Extract functions early and often
- **Comprehensive Documentation**: Keep docs updated and organized
- **Performance Preservation**: Maintain parallel computing compatibility
- **Collaboration Efficiency**: Clear structure for team development

Remember: Quality is everyone's responsibility. When in doubt, prioritize clarity, maintainability, and proper documentation over clever but complex solutions. **If it's disorganized, reorganize it following proper structure.**
